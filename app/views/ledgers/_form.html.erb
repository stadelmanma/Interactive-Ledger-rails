<div id="previous-uploads">
    <h4>Previous Uploads</h4>
    <ul>
        <% @ledger.ledger_uploads.each do |upload| %>
            <% next unless upload.id %>
            <li>
                <span>Data Source:</span><%= upload.data_source %>
                <br>
                <span>Uploaded on:</span><%= upload.created_at.localtime %>
                <br>
                <%= link_to 'Modify Transactions', [:edit, @ledger, upload] %>
                <hr>
            </li>
        <% end %>
    </ul>
</div>

<%= form_for @ledger do |f| %>

    <% if @ledger.errors.any? %>
        <div id="error_explanation">
            <h2>
                <%= pluralize(@ledger.errors.count, "error") %> prohibited
                this article from being saved:
            </h2>
            <ul>
                <% @ledger.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <div>
        <%= f.label :name %>
        <br>
        <%= f.text_field :name %>
    </div>

    <br>
    <div>
        <%= f.fields_for :ledger_uploads,  @ledger.ledger_uploads.build do |upload| %>
            <%= upload.label :account do %>
                Account Name:
                <br>
                <%= upload.text_field :account %>
            <% end %>
            <br>
            <br>
            <%= upload.label :data_source do %>
                Data Source:
                <%= upload.file_field :data_source %>
            <% end %>
            <br>
            <br>
            <%= upload.label :upload_format do %>
                Data Format:
                <%= upload.select :upload_format, options_for_select([['Native', 'default'], ['Chessie', 'chessie'], ['Discover', 'discover']]) %>
            <% end %>
        <% end %>
    </div>

    <br>
    <%= f.submit %>
<% end %>
